@page
@model IndexModel
@{
    ViewData["Title"] = "Hotel Reservation System";
}

<div class="text-center mb-5">
    <h1 class="display-4">Hotel Reservation System</h1>
    <p class="lead">Manage your guests, rooms, and reservations easily.</p>
</div>

<div class="row mb-4">
    <div class="col-md-3">
        <div class="list-group">
            <button type="button" class="list-group-item list-group-item-action active" id="tab-guests" onclick="switchTab('guests')">Guests</button>
            <button type="button" class="list-group-item list-group-item-action" id="tab-rooms" onclick="switchTab('rooms')">Rooms</button>
            <button type="button" class="list-group-item list-group-item-action" id="tab-services" onclick="switchTab('services')">Services</button>
            <button type="button" class="list-group-item list-group-item-action" id="tab-reservations" onclick="switchTab('reservations')">Reservations</button>
        </div>
    </div>
    <div class="col-md-9">
        <!-- Guests Section -->
        <div id="section-guests" class="content-section">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3>Guest Management</h3>
                <button class="btn btn-primary btn-sm" onclick="showAddGuestModal()">Add Guest</button>
            </div>
            <div id="guests-list" class="table-responsive">
                <p>Loading guests...</p>
            </div>
        </div>

        <!-- Rooms Section -->
        <div id="section-rooms" class="content-section d-none">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3>Room Management</h3>
                <button class="btn btn-primary btn-sm" onclick="showAddRoomModal()">Add Room</button>
            </div>
            <div class="mb-3">
                <button class="btn btn-outline-secondary btn-sm" onclick="loadRooms(true)">Show Available Only</button>
                <button class="btn btn-outline-secondary btn-sm" onclick="loadRooms(false)">Show All</button>
            </div>
            <div id="rooms-list" class="table-responsive">
                <p>Loading rooms...</p>
            </div>
        </div>

        <!-- Services Section -->
        <div id="section-services" class="content-section d-none">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3>Service Management</h3>
                <button class="btn btn-primary btn-sm" onclick="showAddServiceModal()">Add Service</button>
            </div>
            <div id="services-list" class="table-responsive">
                <p>Loading services...</p>
            </div>
        </div>

        <!-- Reservations Section -->
        <div id="section-reservations" class="content-section d-none">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3>Reservation Management</h3>
                <button class="btn btn-primary btn-sm" onclick="showAddReservationModal()">New Reservation</button>
            </div>
            <div id="reservations-list" class="table-responsive">
                <p>Loading reservations...</p>
            </div>
        </div>
    </div>
</div>

<!-- Room Details Modal -->
<div class="modal fade" id="roomDetailsModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Room Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="roomDetailsContent">Loading...</div>
            </div>
        </div>
    </div>
</div>

<!-- Service Details Modal -->
<div class="modal fade" id="serviceDetailsModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Service Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="serviceDetailsContent">Loading...</div>
            </div>
        </div>
    </div>
</div>

<!-- Reservation Details Modal -->
<div class="modal fade" id="reservationDetailsModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Reservation Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="reservationDetailsContent">
                    Loading details...
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Add Guest Modal -->
<div class="modal fade" id="addGuestModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add New Guest</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="addGuestForm">
                    <div class="mb-3">
                        <label class="form-label">First Name</label>
                        <input type="text" class="form-control" name="firstName" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Last Name</label>
                        <input type="text" class="form-control" name="lastName" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" name="email" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Phone</label>
                        <input type="text" class="form-control" name="phone">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="createGuest()">Save Guest</button>
            </div>
        </div>
    </div>
</div>

<!-- Add Reservation Modal -->
<div class="modal fade" id="addReservationModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">New Reservation</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="addReservationForm">
                    <div class="mb-3">
                        <label class="form-label">Guest</label>
                        <select class="form-select" name="guestID" id="reservationGuestSelect" required>
                            <option value="">Select Guest...</option>
                        </select>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Check In</label>
                            <input type="date" class="form-control" name="checkInDate" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Check Out</label>
                            <input type="date" class="form-control" name="checkOutDate" required>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Number of Guests</label>
                        <input type="number" class="form-control" name="numberOfGuests" value="1" min="1" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="createReservation()">Create Reservation</button>
            </div>
        </div>
    </div>
</div>

<!-- Add Room To Reservation Modal -->
<div class="modal fade" id="addRoomToReservationModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add Room to Reservation</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="roomReservationId">
                <div class="mb-3">
                    <label class="form-label">Select Room</label>
                    <select class="form-select" id="roomSelect" required>
                        <option value="">Loading rooms...</option>
                    </select>
                    <div class="form-text">Showing only available rooms</div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="submitAddRoom()">Add Room</button>
            </div>
        </div>
    </div>
</div>

<!-- Add Service To Reservation Modal -->
<div class="modal fade" id="addServiceToReservationModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add Service to Reservation</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="serviceReservationId">
                <div class="mb-3">
                    <label class="form-label">Select Service</label>
                    <select class="form-select" id="serviceSelect" required>
                        <option value="">Loading services...</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label">Quantity</label>
                    <input type="number" class="form-control" id="serviceQuantity" value="1" min="1" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Date</label>
                    <input type="date" class="form-control" id="serviceDate" required>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="submitAddService()">Add Service</button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/api-client.js" asp-append-version="true"></script>
}
